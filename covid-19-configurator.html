<!DOCTYPE html>
<html lang="en">

<head>
	<title>COVID-19-Configurator</title>
	<meta charset="utf-8">

	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

	<meta name="description" content="COVID-19 Configurator">
	<meta name="keywords" content="COVID-19, Coronavirus, SARS-CoV-2, Coronavirus disease 2019, Configurator">
	<meta name="author" content="Pavel Boytchev">
	<meta name="version" content="1.0">
	<meta name="date" content="2021.08.12">
	
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;500;700&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="covid-19-configurator.css">

	
</head>

<body>

	<div class="page">
		
		<h2 class="header">COVID-19 Configurator
			<div class="info">The <b>COVID-19 Simulation</b> is controlled by
				<span id="param_count"></span> configuration parameters. Click on the
				name of often used parameters to add them to your favourite parameters.
			</div>
		</h2>		
		
		<div class="start-block">
			<a id="start_button_1" class="start" href="covid-19-simulator.html">Start simulation</a>
			<button id="share_button" class="rightbutton"><img src="icons/sharelink.svg"> Share</button>
			<br>
			<br>
			<button id="fav" class="filter">My</button>
			<button id="all" class="filter">All</button>
			<button id="map" class="filter">Map</button>
			<button id="building" class="filter">Buildings</button>
			<button id="people" class="filter">People</button>
			<button id="daynight" class="filter">Day & night</button>
			<button id="health" class="filter">Health</button>
			<button id="misc" class="filter">Misc</button>
			<select id="tags" class="filter"></select>
		</div>

	
		<div id="blocks">
			<div class="wait">
				LOADING...
			</div>
		</div>
	
		
		<div class="start-block end">
			<a id="start_button_2" class="start" href="covid-19-simulator.html">Start simulation</a>
			<button id="reset_button" class="rightbutton"><img src="icons/reset.svg"> Reset</button>
			<button id="debug_button" class="leftbutton">Debug</button>
		</div>
		
	</div> <!--page-->	


	<script>
		var toggleFav;
	</script>
	
	<script type="module">
		import * as CFG from './configurator/configurator.js';
		import './configurator/map.js';
		import './configurator/buildings.js';
		import './configurator/people.js';
		import './configurator/daynight.js';
		import './configurator/health.js';
		import './configurator/misc.js';
	
		CFG.processTags();
		
		toggleFav = CFG.toggleFav;

		document.getElementById( 'param_count' ).innerHTML = CFG.ids.length;
		document.getElementById( 'reset_button' ).onclick = CFG.resetConfigurator;
		document.getElementById( 'debug_button' ).onclick = CFG.debugConfigurator;
		document.getElementById( 'share_button' ).onclick = CFG.shareConfigurator;
		
		var elems = document.querySelectorAll( 'button.filter' );
		for( var elem of elems )
			elem.addEventListener( 'click', CFG.toggleFilter );
			
		var elems = document.querySelectorAll( 'select.filter' );
		for( var elem of elems )
			elem.addEventListener( 'change', CFG.toggleFilter );
			
		document.getElementById( 'start_button_1' ).onclick = CFG.prepareValues;
		document.getElementById( 'start_button_2' ).onclick = CFG.prepareValues;

		var filter = localStorage.getItem( CFG.LOCAL_STORAGE_FILTER ) || 'fav',
			elem = document.getElementById( filter );
			
		if( elem )
		{
			CFG.toggleFilter( {target:elem} );
		}
		else
		{
			elem = document.getElementById( 'tags' );
			elem.classList.toggle( 'selected', true );
			elem.value = filter;
			CFG.toggleFilter( {target:elem} );
		}
		
		if( !CFG.LOCALHOST ) document.getElementById( 'debug_button' ).style.display = 'none';
		
		document.getElementsByClassName( 'wait' )[0].style.display = 'none';
	</script>
	
</body>
</html>
